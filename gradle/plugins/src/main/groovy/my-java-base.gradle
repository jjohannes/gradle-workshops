plugins {
    id 'java'
    id 'com.github.spotbugs'
}

version = "1.0"

java {
    toolchain.languageVersion.convention(JavaLanguageVersion.of(17))
    toolchain.languageVersion.finalizeValue()
}


tasks.named('compileJava', JavaCompile) {
    options.release.set(8)
}

// In Java notation:
// tasks.named("compile", JavaCompile.class, a -> {
//    a.options.release.set(8);
// })

// tasks.compile { !!!! only in Kotlin DSL !!!
//     options.release.set(8);
// }

tasks.withType(JavaCompile).configureEach {
    options.release.set(8)
    options.release.finalizeValue()
    options.fork = true
    options.forkOptions.memoryMaximumSize = "2g"
}
